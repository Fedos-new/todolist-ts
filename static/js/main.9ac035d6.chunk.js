(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{100:function(t,e,a){t.exports=a(127)},105:function(t,e,a){},127:function(t,e,a){"use strict";a.r(e);var n=a(0),i=a.n(n),o=a(8),r=a.n(o);a(105),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(63);var l,c,s,d=a(171),u=a(172),m=a(173),f=a(163),p=a(129),g=a(166),b=a(175),h=a(176),k=a(174),E=a(15),v=a(25),C=a(81),y=a.n(C).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"api-key":"3c9a379c-5299-4637-abd2-f49a30f8dddb"}}),T=function(t,e){return y.put("todo-lists/".concat(t),{title:e})},j=function(){return y.get("todo-lists/").then((function(t){return t.data}))},O=function(t){return y.delete("todo-lists/".concat(t))},I=function(t){return y.post("todo-lists/",{title:t})},A=function(t,e,a){return y.put("todo-lists/".concat(t,"/tasks/").concat(e),a)},w=function(t){return y.get("todo-lists/".concat(t,"/tasks"))},S=function(t,e){return y.delete("todo-lists/".concat(t,"/tasks/").concat(e))},x=function(t,e){return y.post("todo-lists/".concat(t,"/tasks"),{title:e})},L=function(t){return y.post("auth/login",t)},F=function(){return y.get("auth/me")},N=function(){return y.delete("auth/login")};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(l||(l={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(c||(c={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(s||(s={}));var M=function(t,e){t.messages.length?e(Z({error:t.messages[0]})):e(Z({error:"Some error occurred"})),e(B({status:"failed"}))},P=function(t,e){e(Z({error:t.message})),e(B({status:"failed"}))},z=a(26),D=Object(z.b)({name:"auth",initialState:{isLoggedIn:!1},reducers:{setIsLoggedInAC:function(t,e){t.isLoggedIn=e.payload.value}}}),H=D.reducer,R=D.actions.setIsLoggedInAC,U=Object(z.b)({name:"app",initialState:{status:"idle",error:null,isInitialized:!1},reducers:{setAppStatusAC:function(t,e){t.status=e.payload.status},setAppErrorAC:function(t,e){t.error=e.payload.error},setAppInitializedAC:function(t,e){t.isInitialized=e.payload.isInitialized}}}),W=U.reducer,q=U.actions,B=q.setAppStatusAC,Z=q.setAppErrorAC,J=q.setAppInitializedAC,$=Object(z.b)({name:"task",initialState:[],reducers:{removeTodolistAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.todolistId}));a>-1&&t.splice(a,1)},addTodolistAC:function(t,e){t.unshift(Object(v.a)(Object(v.a)({},e.payload.todolist),{},{filter:"all",entityStatus:"idle"}))},changeTodolistTitleAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.todolistId}));t[a].title=e.payload.title},changeTodolistFilterAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.id}));t[a].filter=e.payload.filter},setTodolistsAC:function(t,e){return e.payload.todolists.map((function(t){return Object(v.a)(Object(v.a)({},t),{},{filter:"all",entityStatus:"idle"})}))},changeTodolistEntityStatusAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.todolistId}));t[a].entityStatus=e.payload.entityStatus,t.map((function(t){return t.id===e.payload.todolistId?Object(v.a)(Object(v.a)({},t),{},{entityStatus:e.payload.entityStatus}):t}))}}}),_=$.reducer,K=$.actions,V=K.removeTodolistAC,G=K.addTodolistAC,Q=K.changeTodolistTitleAC,X=K.changeTodolistFilterAC,Y=K.changeTodolistEntityStatusAC,tt=K.setTodolistsAC,et=Object(z.b)({name:"task",initialState:{},reducers:{removeTaskAC:function(t,e){var a=t[e.payload.todolistId],n=a.findIndex((function(t){return t.id===e.payload.taskId}));n>-1&&a.splice(n,1)},addTaskAC:function(t,e){t[e.payload.task.todoListId].unshift(e.payload.task)},updateTaskAC:function(t,e){var a=t[e.payload.todolistId],n=a.findIndex((function(t){return t.id===e.payload.taskId}));n>-1&&(a[n]=Object(v.a)(Object(v.a)({},a[n]),e.payload.model))},setTasksAC:function(t,e){t[e.payload.todolistId]=e.payload.tasks}},extraReducers:function(t){t.addCase(G,(function(t,e){t[e.payload.todolist.id]=[]})),t.addCase(V,(function(t,e){delete t[e.payload.todolistId]})),t.addCase(tt,(function(t,e){e.payload.todolists.forEach((function(e){t[e.id]=[]}))}))}}),at=et.reducer,nt=et.actions,it=nt.removeTaskAC,ot=nt.addTaskAC,rt=nt.updateTaskAC,lt=nt.setTasksAC,ct=function(t,e,a){return function(n,i){var o=i().tasks[a].find((function(e){return e.id===t}));if(o){var r=Object(v.a)({deadline:o.deadline,description:o.description,priority:o.priority,startDate:o.startDate,title:o.title,status:o.status},e);n(B({status:"loading"})),A(a,t,r).then((function(i){0===i.data.resultCode?n(rt({taskId:t,model:e,todolistId:a})):M(i.data,n),n(B({status:"succeeded"}))})).catch((function(t){P(t,n)}))}else console.warn("task not found in the state")}},st=a(168),dt=a(128),ut=a(46),mt=a(177),ft=a(164),pt=i.a.memo((function(t){console.log("AddItemForm called");var e=Object(n.useState)(""),a=Object(ut.a)(e,2),o=a[0],r=a[1],l=Object(n.useState)(null),c=Object(ut.a)(l,2),s=c[0],d=c[1],u=function(){""!==o.trim()?(t.addItem(o),r("")):d("Title is required")};return i.a.createElement("div",null,i.a.createElement(mt.a,{value:o,variant:"outlined",onChange:function(t){r(t.currentTarget.value)},onKeyPress:function(t){null!==s&&d(null),13===t.charCode&&u()},error:!!s,helperText:s,disabled:"loading"===t.entityStatus}),i.a.createElement(f.a,{onClick:u,color:"primary",disabled:"loading"===t.entityStatus},i.a.createElement(ft.a,null)))})),gt=i.a.memo((function(t){console.log("EditableSpan is called");var e=Object(n.useState)(!1),a=Object(ut.a)(e,2),o=a[0],r=a[1],l=Object(n.useState)(t.title),c=Object(ut.a)(l,2),s=c[0],d=c[1];return o?i.a.createElement(mt.a,{value:s,onBlur:function(){r(!1),t.saveNewTitle(s)},autoFocus:!0,onChange:function(t){d(t.currentTarget.value)}}):i.a.createElement("span",{onDoubleClick:function(){r(!0),d(t.title)}},t.title)})),bt=a(165),ht=a(179),kt=i.a.memo((function(t){var e=Object(n.useCallback)((function(e){t.changeTaskTitle(t.task.id,e,t.todolistId)}),[t.changeTaskTitle,t.task.id,t.todolistId]);return i.a.createElement("div",{key:t.task.id,className:t.task.status===l.Completed?"is-done":""},i.a.createElement(ht.a,{checked:t.task.status===l.Completed,onChange:function(e){t.changeTaskStatus(t.task.id,e.currentTarget.checked?l.Completed:l.New,t.todolistId)}}),i.a.createElement(gt,{title:t.task.title,saveNewTitle:e}),i.a.createElement(f.a,{onClick:function(){return t.removeTask(t.task.id,t.todolistId)},color:"primary"},i.a.createElement(bt.a,null)))})),Et=i.a.memo((function(t){console.log("Todolist is called");var e=Object(E.b)();Object(n.useEffect)((function(){var a;e((a=t.id,function(t){t(B({status:"loading"})),w(a).then((function(e){var n=e.data.items,i=lt({tasks:n,todolistId:a});t(i),t(B({status:"succeeded"}))}))}))}),[]);var a=Object(n.useCallback)((function(e){t.addTasks(e,t.id)}),[t.addTasks,t.id]),o=Object(n.useCallback)((function(){return t.removeTodolist(t.id)}),[t.id,t.removeTodolist]),r=Object(n.useCallback)((function(e){t.changeTodolistTitle(t.id,e)}),[t.id,t.changeTodolistTitle]),c=Object(n.useCallback)((function(){return t.changeFilter("all",t.id)}),[t.changeFilter,t.id]),s=Object(n.useCallback)((function(){return t.changeFilter("active",t.id)}),[t.changeFilter,t.id]),d=Object(n.useCallback)((function(){return t.changeFilter("completed",t.id)}),[t.changeFilter,t.id]),u=t.tasks;return"active"===t.filter&&(u=t.tasks.filter((function(t){return t.status===l.New}))),"completed"===t.filter&&(u=t.tasks.filter((function(t){return t.status===l.Completed}))),i.a.createElement("div",{className:"App"},i.a.createElement("div",null,i.a.createElement("h3",null,i.a.createElement(gt,{title:t.title,saveNewTitle:r}),i.a.createElement(f.a,{onClick:o,disabled:"loading"===t.entityStatus},i.a.createElement(bt.a,null))),i.a.createElement(pt,{addItem:a,entityStatus:t.entityStatus}),i.a.createElement("ul",null,u.map((function(e){return i.a.createElement(kt,{task:e,changeTaskStatus:t.changeTaskStatus,changeTaskTitle:t.changeTaskTitle,removeTask:t.removeTask,todolistId:t.id,key:e.id})}))),i.a.createElement("div",null,i.a.createElement(g.a,{variant:"all"===t.filter?"contained":"text",onClick:c},"All"),i.a.createElement(g.a,{color:"primary",variant:"active"===t.filter?"contained":"text",onClick:s},"Active"),i.a.createElement(g.a,{color:"secondary",variant:"completed"===t.filter?"contained":"text",onClick:d},"Completed"))))})),vt=a(12),Ct=a(167),yt=Object(Ct.a)((function(t){return{containerM:{marginTop:t.spacing(12)},paperLogin:{textAlign:"center",padding:"20px 30px 40px 30px"},paperTodo:{padding:"10px"},gridAddForm:{padding:"20px"},progressLine:{position:"absolute",width:"100%"},progressCircularWrap:{position:"fixed",top:"0",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",left:"0",height:"100vh",width:"100vw"}}})),Tt=function(t){var e=yt(),a=Object(E.c)((function(t){return t.todolists})),o=Object(E.c)((function(t){return t.tasks})),r=Object(E.b)(),l=Object(E.c)((function(t){return t.auth.isLoggedIn}));Object(n.useEffect)((function(){l&&r((function(t){t(B({status:"loading"})),j().then((function(e){t(tt({todolists:e})),t(B({status:"succeeded"}))}))}))}),[]);var c=Object(n.useCallback)((function(t,e){var a=function(t,e){return function(a){a(B({status:"loading"})),S(e,t).then((function(n){0===n.data.resultCode?a(it({taskId:t,todolistId:e})):M(n.data,a),a(B({status:"succeeded"}))})).catch((function(t){P(t,a)}))}}(t,e);r(a)}),[]),s=Object(n.useCallback)((function(t,e){var a=X({filter:t,id:e});r(a)}),[]),d=Object(n.useCallback)((function(t,e){var a=function(t,e){return function(a){a(B({status:"loading"})),x(e,t).then((function(t){0===t.data.resultCode?a(ot({task:t.data.data.item})):M(t.data,a),a(B({status:"succeeded"}))})).catch((function(t){P(t,a)}))}}(t,e);r(a)}),[]),u=Object(n.useCallback)((function(t,e,a){var n=ct(t,{status:e},a);r(n)}),[]),m=Object(n.useCallback)((function(t){var e=function(t){return function(e){e(B({status:"loading"})),I(t).then((function(t){0===t.data.resultCode?e(G({todolist:t.data.data.item})):M(t.data,e),e(B({status:"succeeded"}))})).catch((function(t){P(t,e)}))}}(t);r(e)}),[]),f=Object(n.useCallback)((function(t,e,a){var n=ct(t,{title:e},a);r(n)}),[]),p=Object(n.useCallback)((function(t){var e=function(t){return function(e){e(B({status:"loading"})),e(Y({todolistId:t,entityStatus:"loading"})),O(t).then((function(a){0===a.data.resultCode?e(V({todolistId:t})):M(a.data,e),e(B({status:"succeeded"}))})).catch((function(t){P(t,e)}))}}(t);r(e)}),[]),g=Object(n.useCallback)((function(t,e){var a=function(t,e){return function(a){a(B({status:"loading"})),T(t,e).then((function(n){a(Q({todolistId:t,title:e})),a(B({status:"succeeded"}))})).catch((function(t){P(t,a)}))}}(t,e);r(a)}),[]);return l?i.a.createElement(i.a.Fragment,null,i.a.createElement(st.a,{className:e.gridAddForm},i.a.createElement(pt,{addItem:m,entityStatus:"idle"})),i.a.createElement(st.a,{container:!0,spacing:3},a.map((function(t){var a=o[t.id];return i.a.createElement(st.a,{item:!0,key:t.id},i.a.createElement(dt.a,{className:e.paperTodo},i.a.createElement(Et,{key:t.id,id:t.id,title:t.title,entityStatus:t.entityStatus,tasks:a,removeTask:c,changeFilter:s,addTasks:d,changeTaskStatus:u,filter:t.filter,removeTodolist:p,changeTaskTitle:f,changeTodolistTitle:g})))})))):i.a.createElement(vt.a,{to:"/login"})},jt=a(181),Ot=a(178);function It(t){return i.a.createElement(Ot.a,Object.assign({elevation:6,variant:"filled"},t))}function At(){var t=Object(E.c)((function(t){return t.app.error})),e=Object(E.b)(),a=function(t,a){"clickaway"!==a&&e(Z({error:null}))};return i.a.createElement(jt.a,{open:null!==t,autoHideDuration:6e3,onClose:a},i.a.createElement(It,{onClose:a,severity:"error"},t))}var wt=a(182),St=a(162),xt=a(169),Lt=a(170),Ft=a(87),Nt=function(){var t=Object(E.b)(),e=Object(E.c)((function(t){return t.auth.isLoggedIn})),a=yt(),n=Object(Ft.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(t){var e={};return t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(e.email="Invalid email address"):e.email="Required",t.password?t.password.length<3&&(e.password="Must be more 3 characters"):e.password="Required",e},onSubmit:function(e){var a;t((a=e,function(t){t(B({status:"loading"})),L(a).then((function(e){0===e.data.resultCode?t(R({value:!0})):M(e.data,t),t(B({status:"succeeded"}))})).catch((function(e){P(e,t)}))}))}});return e?i.a.createElement(vt.a,{to:"/"}):i.a.createElement(st.a,{container:!0,justify:"center",alignItems:"center"},i.a.createElement(dt.a,{className:a.paperLogin},i.a.createElement("form",{onSubmit:n.handleSubmit},i.a.createElement(wt.a,null,i.a.createElement(St.a,null,i.a.createElement("p",null,"To log in get registered\xa0",i.a.createElement("a",{href:"https://social-network.samuraijs.com/",target:"_blank",rel:"noopener noreferrer"},"here")),i.a.createElement("p",null,"or use common test account credentials:"),i.a.createElement("p",null,"Email: free@samuraijs.com"),i.a.createElement("p",null,"Password: free")),i.a.createElement(xt.a,null,i.a.createElement(mt.a,Object.assign({label:"Email",margin:"normal"},n.getFieldProps("email"))),n.touched.email&&n.errors.email?i.a.createElement("div",{style:{color:"red"}},n.errors.email):null,i.a.createElement(mt.a,Object.assign({type:"password",label:"Password",margin:"normal"},n.getFieldProps("password"))),n.touched.password&&n.errors.password?i.a.createElement("div",{style:{color:"red"}},n.errors.password):null,i.a.createElement(Lt.a,{label:"Remember me",control:i.a.createElement(ht.a,n.getFieldProps("rememberMe"))}),i.a.createElement(g.a,{type:"submit",variant:"contained",color:"primary"},"Login"))))))};var Mt=function(){var t=Object(E.c)((function(t){return t.app.status})),e=Object(E.c)((function(t){return t.app.isInitialized})),a=Object(E.b)(),o=yt();return Object(n.useEffect)((function(){a((function(t){F().then((function(e){0===e.data.resultCode&&t(R({value:!0})),t(J({isInitialized:!0}))})).catch((function(e){t(J({isInitialized:!0})),P(e,t)}))}))}),[]),e?i.a.createElement("div",{className:"App"},i.a.createElement(At,null),i.a.createElement("div",null,i.a.createElement(u.a,{position:"static",className:"bar"},i.a.createElement(m.a,null,i.a.createElement(f.a,{edge:"start",color:"inherit","aria-label":"menu"},i.a.createElement(k.a,null)),i.a.createElement(p.a,{variant:"h6"},"TodoList"),e&&i.a.createElement(g.a,{color:"inherit",onClick:function(){a((function(t){t(B({status:"loading"})),N().then((function(e){0===e.data.resultCode?(t(R({value:!1})),t(B({status:"succeeded"}))):M(e.data,t)})).catch((function(e){P(e,t)}))}))}},"Log out")))),"loading"===t&&i.a.createElement(b.a,{color:"secondary",className:o.progressLine}),i.a.createElement(h.a,{className:o.containerM},i.a.createElement(vt.d,null,i.a.createElement(vt.b,{exact:!0,path:"/",render:function(){return i.a.createElement(Tt,null)}}),i.a.createElement(vt.b,{exact:!0,path:"/login",render:function(){return i.a.createElement(Nt,null)}}),i.a.createElement(vt.b,{path:"/404",render:function(){return i.a.createElement("h1",null,"Page Not Found - Error 404")}}),i.a.createElement(vt.a,{from:"/*",to:"/404"})))):i.a.createElement("div",{className:o.progressCircularWrap},i.a.createElement(d.a,null))},Pt=a(21),zt=a(49),Dt=Object(Pt.c)({tasks:at,todolists:_,app:W,auth:H}),Ht=Object(z.a)({reducer:Dt,middleware:function(t){return t().prepend(zt.a)}});window.store=Ht;var Rt=a(48);r.a.render(i.a.createElement(E.a,{store:Ht},i.a.createElement(Rt.a,null,i.a.createElement(Mt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},63:function(t,e,a){}},[[100,1,2]]]);
//# sourceMappingURL=main.9ac035d6.chunk.js.map